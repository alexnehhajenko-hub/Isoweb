<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Isoweb 3D</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    #menu {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }
    #menu button {
      margin: 5px;
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="menu">
    <button id="uploadPhoto">ðŸ“· Ð¤Ð¾Ñ‚Ð¾</button>
    <button id="removeBg">ðŸ§¹ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð¾Ð½</button>
    <button id="center">ðŸŽ¯ Ð¦ÐµÐ½Ñ‚Ñ€</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.160.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.1/examples/js/controls/OrbitControls.js"></script>

  <script>
    let scene, camera, renderer, controls;
    let backgroundMesh = null;

    init();
    animate();

    function init() {
      scene = new THREE.Scene();

      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 2, 5);

      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ‹
      controls = new THREE.OrbitControls(camera, renderer.domElement);

      // Ð¡ÐµÑ‚ÐºÐ°
      const gridHelper = new THREE.GridHelper(10, 10);
      scene.add(gridHelper);

      // ÐžÑÐ¸
      const axesHelper = new THREE.AxesHelper(5);
      scene.add(axesHelper);

      // Ð¡Ð²ÐµÑ‚
      const light = new THREE.DirectionalLight(0xffffff, 1);
      light.position.set(5, 10, 7).normalize();
      scene.add(light);

      // ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð¤Ð¾Ñ‚Ð¾"
      document.getElementById('uploadPhoto').onclick = () => {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';
        input.onchange = e => {
          const file = e.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = function(event) {
            const texture = new THREE.TextureLoader().load(event.target.result);
            if (backgroundMesh) scene.remove(backgroundMesh);
            const geometry = new THREE.PlaneGeometry(10, 10);
            const material = new THREE.MeshBasicMaterial({ map: texture });
            backgroundMesh = new THREE.Mesh(geometry, material);
            backgroundMesh.position.z = -5;
            scene.add(backgroundMesh);
          };
          reader.readAsDataURL(file);
        };
        input.click();
      };

      // ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð¾Ð½"
      document.getElementById('removeBg').onclick = () => {
        if (backgroundMesh) {
          scene.remove(backgroundMesh);
          backgroundMesh = null;
        }
      };

      // ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð¦ÐµÐ½Ñ‚Ñ€"
      document.getElementById('center').onclick = () => {
        controls.reset();
      };

      window.addEventListener('resize', onWindowResize, false);
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }
  </script>
</body>
</html>