<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>IsoPipe ‚Äî –∏–∑–æ–º–µ—Ç—Ä–∏—è –ø–æ —Ç–æ—á–∫–∞–º</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="cv"></canvas>

  <div class="bar" id="topBar">
    <button id="btnHand" class="btn ghost">–†—É–∫–∞</button>
    <button id="btnFit"  class="btn ghost">–§–∏—Ç</button>
    <button id="btnZoomIn" class="btn ghost">Ôºã</button>
    <button id="btnZoomOut" class="btn ghost">Ôºç</button>
    <button id="btnLine" class="btn">–õ–∏–Ω–∏—è</button>
    <button id="btnUndo" class="btn ghost">‚Ü© –ù–∞–∑–∞–¥</button>
    <button id="btnExport" class="btn ghost">PNG</button>

    <div class="dropdown">
      <button id="btnLib" class="btn ghost">–≠–ª–µ–º–µ–Ω—Ç—ã ‚ñæ</button>
      <div id="libMenu" class="menu">
        <button data-type="ball">–®–∞—Ä–æ–≤—ã–π –≤–µ–Ω—Ç–∏–ª—å</button>
        <button data-type="gate">–ó–∞–¥–≤–∏–∂–∫–∞</button>
        <button data-type="globe">–†–µ–≥—É–ª–∏—Ä—É—é—â–∏–π</button>
        <button data-type="check">–û–±—Ä–∞—Ç–Ω—ã–π</button>
        <button data-type="pump">–ù–∞—Å–æ—Å</button>
      </div>
    </div>

    <div class="dropdown">
      <button id="btnMedia" class="btn ghost">–ú–µ–¥–∏–∞ ‚ñæ</button>
      <div id="mediaMenu" class="menu">
        <label class="file-btn">üì∑ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
          <input id="pickCamera" type="file" accept="image/*" capture="environment">
        </label>
        <label class="file-btn">üñº –í—ã–±—Ä–∞—Ç—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
          <input id="pickGallery" type="file" accept="image/*">
        </label>
        <button id="btnClearImage">–£–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</button>
      </div>
    </div>
  </div>

  <button id="btnSettings" class="gear" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>

  <div id="angleTag" class="angle-tag" style="display:none">0¬∞</div>
  <div id="toast" class="toast"></div>

  <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
  <div id="panelWrap" class="panel-wrap" aria-hidden="true">
    <div id="panelBackdrop" class="panel-backdrop"></div>
    <div id="panel" class="panel" role="dialog" aria-modal="true" tabindex="-1">
      <h4>–ò–∑–æ–º–µ—Ç—Ä–∏—è / –ú–∞–≥–Ω–∏—Ç</h4>
      <div class="row switch">
        <input id="snapOn" type="checkbox" checked>
        <label for="snapOn">–ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ (–∫–æ–Ω—Ü—ã, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ, 0/90/30/150¬∞)</label>
      </div>
      <div class="row">
        <label>–†–∞–¥–∏—É—Å —É–∑–ª–æ–≤ (px)</label>
        <input id="snapRadius" type="range" min="6" max="40" value="18">
        <span id="snapRadiusVal" class="val">18</span>
      </div>
      <div class="row">
        <label>–î–æ–ø—É—Å–∫ –æ—Å–∏ (¬±¬∞)</label>
        <input id="isoTol" type="range" min="4" max="25" value="10">
        <span id="isoTolVal" class="val">10</span>
      </div>
      <div class="row">
        <label>–õ–∏–ø–∫–æ—Å—Ç—å –∫–æ–Ω—Ü–æ–≤ (px)</label>
        <input id="endStick" type="range" min="12" max="60" value="28">
        <span id="endStickVal" class="val">28</span>
      </div>
      <div class="row">
        <label>–§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è (px)</label>
        <input id="finalSnapLimit" type="range" min="0" max="20" value="6">
        <span id="finalSnapLimitVal" class="val">6</span>
      </div>

      <h4>–û—Ç—Ä–∏—Å–æ–≤–∫–∞</h4>
      <div class="row">
        <label>–¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏ (px)</label>
        <input id="lineWidth" type="range" min="2" max="24" value="6">
        <span id="lineWidthVal" class="val">6</span>
      </div>
      <div class="row switch">
        <input id="showPoints" type="checkbox" checked>
        <label for="showPoints">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ—á–∫–∏</label>
      </div>
      <div class="row">
        <label>–†–∞–∑–º–µ—Ä —Ç–æ—á–∫–∏ (px)</label>
        <input id="ptSize" type="range" min="4" max="20" value="10">
        <span id="ptSizeVal" class="val">10</span>
      </div>

      <h4>–®–∫–∞–ª–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h4>
      <div class="row">
        <label>–ü–∏–∫—Å–µ–ª–µ–π –Ω–∞ –º–º</label>
        <input id="pxPerMm" type="range" min="3" max="16" value="6">
        <span id="pxPerMmVal" class="val">6</span>
      </div>

      <div class="row">
        <button id="btnDone"  class="btn ok">–ì–æ—Ç–æ–≤–æ</button>
        <button id="btnClear" class="btn danger">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script src="valve.js"></script>
</body>
</html>